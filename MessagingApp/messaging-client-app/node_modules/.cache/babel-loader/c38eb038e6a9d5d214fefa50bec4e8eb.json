{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/ag/Fontys/IT/tickiesystem/MessagingApp/messaging-client-app/src/Components/Messaging.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport TextField from '@material-ui/core/TextField';\nimport Paper from '@material-ui/core/Paper';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport { positions } from '@material-ui/system';\nimport Message from '../Components/Message';\nlet stompClient = null;\n\nconst onError = error => {};\n\nconst useStyles = makeStyles(theme => ({\n  container: {\n    margin: theme.spacing(3),\n    minWidth: 120,\n    boxSizing: 'border-box',\n    height: '90vh'\n  },\n  textField: {\n    position: \"absolute\",\n    float: \"left\",\n    top: \"84vh\",\n    width: '80%'\n  },\n  button: {\n    position: \"absolute\",\n    float: \"right\",\n    top: \"84vh\",\n    width: '20%',\n    height: '6vh'\n  }\n}));\nexport default function Messaging() {\n  _s();\n\n  const [message, setMessage] = useState('');\n  const [messages, setmessages] = useState([]);\n  const [messageCount, setmessageCount] = useState(0);\n\n  const connect = userName => {\n    userName = \"test\";\n\n    if (userName) {\n      const Stomp = require('stompjs');\n\n      let SockJS = require('sockjs-client');\n\n      SockJS = new SockJS('http://localhost:8080/ws');\n      stompClient = Stomp.over(SockJS);\n      console.log(stompClient);\n      stompClient.connect({}, onConnected, onError);\n    }\n  };\n\n  const onMessageReceived = payload => {\n    if (payload) {\n      let message = JSON.parse(payload.body);\n      setmessages(messages.push(message));\n      console.log(messages[0]);\n      let incrementState = messageCount + 1;\n      setmessageCount(incrementState);\n    }\n  };\n\n  const onConnected = () => {\n    // Subscribing to the public topic\n    stompClient.subscribe('/topic/pubic', onMessageReceived); // Registering user to server as a public chat user\n\n    stompClient.send(\"/app/addUser\", {}, JSON.stringify({\n      sender: 'test',\n      message: 'JOIN'\n    }));\n  };\n\n  const sendMessage = () => {\n    if (stompClient) {\n      let chatMessage = {\n        sender: \"test\",\n        message: message\n      }; // send public message\n\n      stompClient.send(\"/app/sendMessage\", {}, JSON.stringify(chatMessage));\n      setMessage('');\n    }\n  };\n\n  const handleMessageChange = event => {\n    setMessage(event.target.value);\n  };\n\n  useEffect(() => {\n    connect(\"test\");\n  }, []);\n  useEffect(() => {}, [messageCount]);\n  const classes = useStyles();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(Paper, {\n      elevation: 3,\n      className: classes.container,\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 3,\n        children: /*#__PURE__*/_jsxDEV(Message, {\n          messages: message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TextField, {\n        zIndex: \"tooltip\",\n        onChange: event => handleMessageChange(event),\n        className: classes.textField,\n        id: \"filled-basic\",\n        label: \"Filled\",\n        variant: \"filled\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        zIndex: \"modal\",\n        className: classes.button,\n        variant: \"outlined\",\n        color: \"primary\",\n        onClick: () => sendMessage(),\n        children: \"Send\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 133,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Messaging, \"AeHQA+GyRPpA5rBrb6nUUh2taZU=\", false, function () {\n  return [useStyles];\n});\n\n_c = Messaging;\n\nvar _c;\n\n$RefreshReg$(_c, \"Messaging\");","map":{"version":3,"sources":["/home/ag/Fontys/IT/tickiesystem/MessagingApp/messaging-client-app/src/Components/Messaging.jsx"],"names":["React","useEffect","useState","TextField","Paper","makeStyles","Button","Grid","positions","Message","stompClient","onError","error","useStyles","theme","container","margin","spacing","minWidth","boxSizing","height","textField","position","float","top","width","button","Messaging","message","setMessage","messages","setmessages","messageCount","setmessageCount","connect","userName","Stomp","require","SockJS","over","console","log","onConnected","onMessageReceived","payload","JSON","parse","body","push","incrementState","subscribe","send","stringify","sender","sendMessage","chatMessage","handleMessageChange","event","target","value","classes"],"mappings":"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","sourcesContent":["import React, {useEffect,useState} from 'react'\nimport TextField from '@material-ui/core/TextField';\nimport Paper from '@material-ui/core/Paper';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport { positions } from '@material-ui/system';\nimport Message from '../Components/Message';\n\n\n\nlet stompClient = null;\n\n  const onError = (error) => {\n    \n  }\n\nconst useStyles = makeStyles((theme) => ({\n    container: {\n      margin: theme.spacing(3),\n      minWidth: 120,\n      boxSizing: 'border-box',\n      height: '90vh'\n\n    },\n    textField: {\n        position: \"absolute\",\n        float:\"left\", \n        top:\"84vh\",\n        width:'80%'\n    },\n    button:{\n      position: \"absolute\",\n        float:\"right\", \n        top:\"84vh\",\n        width:'20%',\n        height:'6vh',\n    }\n  }));\n\n\nexport default function Messaging() {\n\n  const [message, setMessage] = useState('')\n\n  const [messages, setmessages] = useState([])\n\n  const [messageCount, setmessageCount] = useState(0)\n\n  const connect = (userName) => {\n\n    userName = \"test\";\n\n    if (userName) {\n\n      const Stomp = require('stompjs')\n\n      let SockJS = require('sockjs-client')\n\n      SockJS = new SockJS('http://localhost:8080/ws')\n\n      stompClient = Stomp.over(SockJS);\n\n      console.log(stompClient);\n\n      stompClient.connect({}, onConnected, onError);\n\n    }\n  }\n\n  const onMessageReceived = (payload) => {\n    if (payload) {\n      \n      let message = JSON.parse(payload.body);\n\n      setmessages(messages.push(message));\n\n      console.log(messages[0]);\n\n      let incrementState = messageCount+1;\n      setmessageCount(incrementState);\n\n      \n  \n    }\n      \n   }\n\n  const onConnected = () => {\n\n    // Subscribing to the public topic\n    stompClient.subscribe('/topic/pubic', onMessageReceived);\n  \n    // Registering user to server as a public chat user\n    stompClient.send(\"/app/addUser\", {}, JSON.stringify({ sender:'test' ,message:'JOIN' }))\n  \n  }\n\n  const sendMessage = () => {\n    if (stompClient) {\n      let chatMessage = {\n        sender: \"test\",\n        message: message\n  \n      };\n\n      // send public message\n      stompClient.send(\"/app/sendMessage\", {}, JSON.stringify(chatMessage));\n\n      setMessage('');\n\n    }\n  }\n\n  const handleMessageChange =(event) =>{\n\n    setMessage(event.target.value)\n  }\n\n  useEffect(() => {\n    connect(\"test\");\n  },[])\n\n  useEffect(() => {\n    \n  }, [messageCount])\n\n  \n\n    const classes = useStyles();\n\n    return (\n        <div>\n        <Paper elevation={3} className={classes.container}>\n        <Grid container spacing={3}>\n        <Message messages={message} />\n        </Grid>\n        <TextField zIndex=\"tooltip\" onChange={(event) => handleMessageChange(event)} className={classes.textField} id=\"filled-basic\" label=\"Filled\" variant=\"filled\" />\n        <Button zIndex=\"modal\" className={classes.button} variant=\"outlined\" color=\"primary\" onClick={() => sendMessage()}>Send</Button>\n        </Paper>\n        </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}